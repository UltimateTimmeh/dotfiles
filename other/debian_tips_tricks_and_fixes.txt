This file contains tips, tricks and fixes for all sorts of problems that were encountered during
configuration of my new laptop, running Debian Jessie 8.2.

Note: In or around May 2017, my system was upgraded to Debian Stretch 9.1. Some tricks have been
      updated, others may be outdated.

==============
VOLUME CONTROL
==============
If there is no sound, or audio is otherwise difficult to control, the package 'pavucontrol' can be
installed. This package allows extensive control over all things audio (both in- and output) and
can most likely be used to fix whatever is preventing sound from coming out of the laptop's speakers.

===========
COMPOSE KEY
===========
To type characters like 'é' and 'ç' using a QWERTY keyboard layout, you need to configure the
'compose' key. This can be done by editing the following line in the file /etc/default/keyboard
(only possible with root permissions, of course):

    XKBOPTIONS="compose:rctrl"

This will set the right Ctrl key as the compose key. Here's a list of all compose key possibilities:

    compose:ralt    Right Alt
    compose:lwin    Left Win
    compose:rwin    Right Win
    compose:menu    Menu
    compose:lctrl   Left Ctrl
    compose:rctrl   Right Ctrl
    compose:caps    Caps Lock
    compose:102     &lt;Less/Greater&gt;
    compose:paus    Pause
    compose:prsc    PrtSc
    compose:sclk    Scroll Lock

You need to reboot for the change to take effect. Once restarted, you can try typing an 'é'. Open a
text editor. While holding the compose key, type the "'" key. Release the compose key and then type
'e'. The result should be 'é'. Try different combinations! Can you figure out how to type 'ç'?

==============
LOW RESOLUTION
==============
It's possible that, after completing the installation process, it appears as though the resolution
of your applications is wrong (e.g. the desktop resolution looks fine but the text in the menus is
bigger than you expected, everything in your browser looks huge, etc...). This might not be a problem
with resolution at all, but with the DPI setting. To fix this, open 'Application Menu --> Settings
--> Appearance'. In the tab 'Fonts', you can change the DPI setting. A good default setting is 96. If
it already is 96, then just change it to whatever (e.g. 97) and change it back. This will trigger
an update to the correct DPI setting, and you should immediately see the size of text in the
'Appearance' menu change to something that looks better. For the changes to take effect in other
applications (such as your browser), you might have to restart the application. A full reboot should
not be necessary.

If the "resolution" of the Debian login screen also looks incorrect, then the previously mentioned
steps won't fix that. Here you need to manually configure the DPI setting in the /etc/X11/xorg.conf
file (using root privileges). In the 'Monitor' section, add the following:

    Section "Monitor"
        ...
	Option         "DPI"   "96 x 96" (<-- add this line)
    EndSection

Of cource you can use whatever you want instead of 96. Now reboot, and your login screen should look
OK.

======
ABAQUS
======
Abaqus is installed by copying it from the feops1 server. Of course this means you need to have a
user account on feops1. As root, do the following:

    # mkdir -pv /usr/local/abaqus/Commands
    # rsync user@feops1:/usr/local/abaqus/VER /usr/local/abaqus -av[n]

In the second command VER is one of 6.10-1, 6.11-1, 6.12-1, 6.13-5, 6.14-1, 6.5-4, 6.6-2, 6.7-3,
6.8-1, 6.9-2, 6.9-EF1. The second command should be repeated for every version you wish to install.
The optional n parameter is to execute a dry run of the rsync operation, to make sure what will be
copied is correct.

Then, to create the abaqus links and choose a default version, do the following (still as root):

    # rsync user@feops1:/usr/local/sbin/abq_links /usr/local/sbin
    # rsync user@feops1:/usr/local/bin/abq_lic /usr/local/bin
    # abq_links

That should be it!

========
RSS FEED
========

I am using tickr to see a see an always-visible banner containing a live stream of my RSS feeds
(think of the sliding banner of text at the bottom of the screen on news channels such as CNN,
etc...) during normal operations on my laptop. To get this effect:

1) The installsymlinks script included in the dotfiles installs the tickr config that is included in
   this dotfiles repository. Using this config, the tickr window will be located at the bottom of the
   screen and will not always be on top of all windows.
2) Because the tickr window is not always on top, it might be hidden by an xfce4-panel that is
   located at the bottom. To make the tickr window visible during normal operations, you should make
   the panel automatically show and hide itself (see the panel's preferences for this setting). This
   is generally a good idea anyway, to maximize the amount of workspace you have for your windows.
   When you need the panel, move your mouse to the bottom of the screen and it will appear (covering
   any window that might occupy the same space of the screen). Move your mouse away from the panel to
   make it hide itself again.
3) Because the tickr window is not always on top, it might be hidden by maximized windows that occupy
   the same region of the screen. To be able to work in maximized windows but still always see the
   tickr feed at the bottom of the screen, you need to limit the region of the screen that can be
   occupied by windows. Go to 'Application Menu --> Settings --> Workspaces'. In the 'Margins' tab,
   set a bottom margin such that maximized windows don't overlap the tickr feed, but also don't leave
   a gap between the maximized window and the tickr window. For the tickr config in this .dotfiles
   repository, a margin of 18 pixels should be what you're looking for.

The xfce desktop environment and tickr are both extremely customizable, and can be configured to get
pretty much any effect you desire by playing with colors, opacities, window locations, dimensions
and workspace margins. Have fun!

====================
DUALBOOT CLOCK SETUP
====================

When switching between Windows and Debian, there can be a few problem concerning the clock showing
an incorrect time on either Debian or Windows. For me the problem was as follows. I manually set
the hardware clock to UTC, because Debian assumes the hardware clock to be UTC and then adjusts
that to local time depending on the configured time zone. But when I switch to Windows, the clock
on Windows would be one hour behind (because it assumes the hardware clock to be local time). After
a while (and if there is an internet connection), Windows will update the hardware clock to the
correct local time. If I switch back to Debian, the clock there will now be one hour ahead. To get
the correct time back on Debian, I have to reboot into the BIOS and manually set the hardware clock
back to UTC. That's just plain annoying, so I figured out this permanent fix:

1) Install NTP (I'm not actually sure this step is required for this fix to work). This package is
   supposed to automatically set the clock over the internet. However, since I always had to go
   into the BIOS to manually set the hardware clock back to UTC if I wanted the correct time back
   on Debian after having switched to Windows, I'm not entirely sure this works properly for me.

   # apt-get install ntp

2) Edit the file /etc/adjtime to make Debian look at the hardware clock as local time instead of
   UTC.

   # nano /etc/adjtime

   Change 'UTC' to 'LOCAL' and save the file.

3) Reboot. After restarting, Debian will assume the hardware clock to be local time and no offset
   will be applied (just like Windows does). From now on, the time should always be the same on both
   operating systems. If this time is currently incorrect, then you will either have to wait for
   Debian to update the clock using NTP (if it works), switch to Windows and let it update the clock
   or jump into the BIOS and do it yourself.

=================
MULTIPLE MONITORS
=================

When using multiple monitors, open the nvidia-settings application with root permissions. Go to
the "Display Configuration" tab. Activate the 'Advanced...' settings and check 'Enable Base
Mosaic'. Now select the secondary screen, and set its 'Position' to the correct relative setting.
Save the settings to the X Configuration File (don't merge with existing). Apply the changes.
Workspaces should now be stretched to include the second monitor.

The tickr RSS feed banner needs to be updated to use the full length of the screen.

A panel (i.e. the bar at the bottom of the screen) needs to be added on the second screen. Right
click the existing panel on the primary monitor and select 'Panel -> Panel Preferences...'.
Click the '+' icon next to the list of panels to add a new panel and move it to the correct location
on the secondary screen. Give it the following settings:

    Display
    -------
    Mode: Horizontal
    Output: Automatic
    Span monitors: no
    Lock panel: yes
    Automatically show and hide the panel: yes
    Don't reserve space on borders: yes
    Row Size (pixels): 30
    Number of rows: 1
    Length (%): 100
    Automatically increase the length: yes

    Appearance
    ----------
    Style: None (use system style)

    Items
    -----
    Applications Menu
    Launcher ; Xfce Terminal ; Terminal Emulator ; xfce4-terminal
    Launcher ; File Manager PCManFM ; Browse the file system and manage the files ; pcmanfm
    Launcher ; Google Chrome ; Access the Internet ; google-chrome %U
    Launcher ; Thunderbird ; Read/Write Mail/News with Thunderbird ; /usr/bin/thunderbird %u
    Launcher ; Steam ; Application for managing and playing games on Steam ; /usr/games/steam %U
    Launcher ; pyFormex DEV ; Launch the developer version of pyFormex ; /path/to/pyformex --redirect --pyside
    Launcher ; TAVIguide-pp ; Launch TAVIguide-pp ; /home/<user>/Documents/pyformex/pyformex/pyformex --gui --redirect --pyside /home/tim/Documents/feops/taviguide/taviguide-pp/taviguide/TAVIguide-pp.py ; TAVIguide-pp icon + TAVIguide-pp legacy ; Launch TAVIguide-pp legacy ; /home/tim/Documents/pyformex/pyformex/pyformex --gui --redirect --pyside /home/tim/Documents/feops/taviguide/taviguide-pp/taviguide/TAVIguide.py ; TAVIguide-pp icon
    Window Buttons
    Separator ; Transparent ; expand
    Workspace Switcher
    Launcher ; PulseAudio Volume Control ; Adjust the volume level ; pavucontrol
    Notification Area ; don't show frame (only possible in one panel)
    Power Manager Plugin
    Clock ; Layout: Digital, Tooltip format: Custom Format (empty field), Format: Custom Format (%T%n%Y-%m-%d)

=====================
INDIRECT GLX CONTEXTS
=====================

To enable the indirect GLX contexts, which are necessary for running OpenGL applications
(e.g. pyFormex) remotely over SSH with X11 forwarding, do the following:

    # nano /usr/share/lightdm/lightdm.conf.d/01_debian.conf

    Add the line 'xserver-command=X -core +iglx' to the bottom of the file, save and restart.
