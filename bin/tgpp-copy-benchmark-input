#!/bin/bash
# Copy TAVIguide benchmark case input files over from the server.

if [ $# -ne 4 ]; then
    echo "Usage: tgpp-copy-benchmark-input TASK BENCHID TESTID USER"
    echo "Copy the TAVIguide benchmark case input files necessary for executing TASK"
    echo "of case TESTID, which is an instance of TAVIguide benchmark case BENCHID"
    echo "as USER."
    exit
fi

BENCHROOT=$4"@feops1:/home/feops/TAV/Verification/SystemVerification/benchmark"
REPLAYROOT="/home/test_op/tavireplay"
TESTROOT="/test/cases"
TESTROOTALT=${TESTROOT//'/'/'-'}

if [ $1 = 'seg' ]; then
    scp -r $BENCHROOT/$2/segmentation/* $TESTROOT/$3/segmentation
    for FILENAME in annular_plane.csv PR.mcs PR_aorta.stl PR_aortacalcs.stl PR_valve.stl PR_valvecalcs.stl; do
	mv $TESTROOT/$3/segmentation/$2-$FILENAME $TESTROOT/$3/segmentation/$3-$FILENAME
    done
    for FILENAME in slice1.PNG
    do
	mv $TESTROOT/$3/segmentation/root_slices/$2-$FILENAME $TESTROOT/$3/segmentation/root_slices/$3-$FILENAME
    done
elif [ $1 = 'feapre' -o $1 = 'feapreqc' -o $1 = 'feapost' -o $1 = 'feapostqc' -o $1 = 'cfdpostqc' ]; then
    scp $BENCHROOT/$2/replay/$2_replay.py $REPLAYROOT/$TESTROOTALT-$3_replay_$1.py
else
    echo "Task '$1' not known. Choose one of: [seg, feapre, feapreqc, feapost, feapostqc, cfdpostqc]"
fi
